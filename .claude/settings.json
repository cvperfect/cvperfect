{
  "project": {
    "name": "CVPerfect",
    "version": "2.0.0",
    "description": "AI-powered CV optimization platform",
    "framework": "Next.js 14",
    "language": "JavaScript",
    "database": "Supabase",
    "ai_service": "Groq + Llama 3.1-70B"
  },
  "mcpServers": {
    "context7": {
      "command": "npx",
      "args": ["@context7/mcp-server"],
      "env": {
        "CONTEXT7_API_KEY": "demo"
      }
    },
    "sequential": {
      "command": "npx",
      "args": ["@sequential/mcp-server"],
      "env": {
        "SEQUENTIAL_MODE": "enabled"
      }
    },
    "puppeteer": {
      "enabled": true,
      "auto_start": true,
      "command": "npm run mcp-puppeteer",
      "description": "Browser automation for testing",
      "config": {
        "headless": true,
        "viewport": {
          "width": 1920,
          "height": 1080
        },
        "timeout": 30000
      }
    }
  },
  "permissions": {
    "allow": [
      "Bash(npx:*)",
      "Bash(npm:*)", 
      "Bash(node:*)",
      "Bash(.claude/hooks/*)",
      "Bash(.claude/test-snapshots/*)",
      "Bash(ls:*)",
      "Bash(git status)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push:*)",
      "Bash(git checkout:*)",
      "Bash(git diff:*)",
      "Bash(git pull:*)",
      "Bash(npm run dev:*)",
      "Bash(npm run build:*)",
      "Bash(npm run lint:*)",
      "Bash(npm run typecheck:*)",
      "Bash(npm run test:*)",
      "Bash(rm:*)",
      "Bash(cp:*)",
      "Bash(mv:*)",
      "Bash(mkdir:*)",
      "Bash(echo:*)",
      "Bash(curl:*)",
      "Bash(grep:*)",
      "Bash(rg:*)",
      "Bash(gh pr view:*)",
      "Bash(gh pr diff:*)",
      "Bash(gh pr create:*)",
      "Bash(gh issue:*)",
      "Bash(winget:*)",
      "Bash(taskkill:*)",
      "Bash(dir:*)",
      "Bash(copy:*)",
      "Bash(del:*)",
      "Bash(timeout:*)",
      "Bash(start:*)",
      "Bash(chmod:*)",
      "Bash(bash:*)",
      "Bash(cmd:*)",
      "Bash(pkill:*)",
      "mcp__playwright__*",
      "WebSearch",
      "WebFetch"
    ],
    "deny": [],
    "ask": []
  },
  "ui": {
    "showMcpTools": false,
    "showMcpStatus": false
  },
  "claude": {
    "model": "claude-opus-4.1",
    "thinking_budget": "high",
    "context_management": {
      "auto_clear_threshold": 0.7,
      "compression_disabled": true,
      "max_context_files": 3
    },
    "verification_protocol": {
      "enabled": true,
      "mandatory_steps": ["lint", "build", "test", "verify"],
      "anti_hallucination": true,
      "trust_but_verify": true
    }
  },
  "safety": {
    "regressionPrevention": {
      "enabled": true,
      "blockOnCriticalFailure": true,
      "requireTestsBeforeCommit": true,
      "snapshotOnSuccess": true,
      "maxFailedTests": 2,
      "criticalTests": ["build", "lint", "smoke_test"],
      "autoRollbackThreshold": 5
    },
    "fileProtection": {
      "criticalFiles": [
        "pages/index.js",
        "pages/success.js",
        "pages/api/*.js",
        ".claude/settings.json",
        "package.json"
      ],
      "requireConfirmation": true,
      "createBackups": true
    }
  },
  "commandEnforcement": {
    "enabled": true,
    "mode": "mandatory",
    "autoExecution": true,
    "complianceTracking": true,
    "violationsLogging": true,
    "description": "Automatyczne wykrywanie i wymuszanie wykonywania wszystkich skrótów użytkownika + SuperClaude features",
    "supportedFlags": {
      "thinkingModes": ["-ut", "-th", "-t", "-td"],
      "superclaudeThinking": ["-sc16", "-sc32", "-sc64", "-scmax"],
      "superclaudeFeatures": ["-token", "-commit", "-arch", "-analyze"],
      "workflowShortcuts": ["-p", "-r", "-sa", "-todo", "-test", "-mc"],
      "debugging": ["-fix", "-debug", "-dm", "-check"],
      "sessionManagement": ["-clear", "-init"]
    },
    "priorities": {
      "critical": ["-ut", "-dm", "-sa", "-sc64", "-scmax"],
      "high": ["-th", "-td", "-fix", "-sc32", "-arch", "-analyze"],
      "medium": ["-sc16", "-token", "-commit"],
      "normal": ["-p", "-r", "-todo", "-debug", "-check"],
      "low": ["-t", "-test", "-mc", "-clear", "-init"]
    },
    "compliance": {
      "requireAll": true,
      "allowPartial": false,
      "logViolations": true,
      "generateReports": true,
      "reportsPath": ".claude/compliance-reports"
    }
  },
  "superclaudeEnforcement": {
    "enabled": true,
    "mode": "strict",
    "description": "Wymusza użycie SuperClaude-enhanced features w każdej sesji",
    "mandatoryFeatures": {
      "tokenOptimization": {
        "enabled": true,
        "triggerOnFileSize": 100000,
        "triggerOnComplexity": "medium",
        "autoApply": true
      },
      "extendedThinking": {
        "enabled": true,
        "suggestOnComplexTasks": true,
        "autoApplyOnKeywords": true,
        "autoExecuteWithoutConfirmation": true,
        "minThinkingTokens": 16000,
        "maxThinkingTokens": 128000,
        "autoTriggerKeywords": ["analyze", "architecture", "complex", "system", "optimize", "comprehensive", "debug", "refactor"]
      },
      "aiCommitGeneration": {
        "enabled": true,
        "autoTrigger": "always",
        "autoApplyOnCodeChanges": true,
        "autoExecuteWithoutConfirmation": true,
        "requireApproval": false,
        "detectChangesAutomatically": true
      },
      "architectureAnalysis": {
        "enabled": true,
        "scheduledRuns": "weekly", 
        "triggerOnStructuralChanges": true,
        "autoTriggerOnLargeChanges": true,
        "autoExecuteWithoutConfirmation": true,
        "fileCountThreshold": 3,
        "autoTriggerKeywords": ["architecture", "system", "structure", "component"]
      }
    },
    "enforcementRules": {
      "largeFileOperations": "MUST use token optimization",
      "complexAnalysis": "MUST use extended thinking mode",
      "codeChanges": "MUST generate AI commit messages",
      "structuralModifications": "MUST run architecture analysis"
    },
    "penalties": {
      "tokenOptimizationSkipped": "WARNING + Auto-apply",
      "extendedThinkingIgnored": "REMINDER + Suggestion",
      "manualCommitMessages": "REPLACEMENT with AI-generated",
      "missedArchitectureAnalysis": "AUTO-SCHEDULE next session"
    }
  },
  "commandMapping": {
    "superclaudeCommands": {
      "-ut": {
        "description": "Ultra Think with full autonomous execution",
        "action": "Ultrathink and execute with full autonomous decision-making",
        "enforcement": "MANDATORY for maximum AI capability",
        "autonomy": "full",
        "thinkingTokens": 128000,
        "executionMode": "autonomous"
      },
      "-sc16": {
        "description": "Extended thinking with 16K tokens",
        "action": "ultrathink with 16000 thinking tokens",
        "enforcement": "MANDATORY for complex analysis"
      },
      "-sc32": {
        "description": "Extended thinking with 32K tokens", 
        "action": "ultrathink with 32000 thinking tokens",
        "enforcement": "MANDATORY for comprehensive analysis"
      },
      "-sc64": {
        "description": "Extended thinking with 64K tokens",
        "action": "ultrathink with 64000 thinking tokens", 
        "enforcement": "MANDATORY for maximum analysis"
      },
      "-scmax": {
        "description": "Extended thinking with maximum tokens",
        "action": "ultrathink with 128000 thinking tokens",
        "enforcement": "MANDATORY for ultra-complex analysis"
      },
      "-token": {
        "description": "Apply token optimization",
        "action": "Use token optimization for this operation",
        "enforcement": "MANDATORY for large files/operations"
      },
      "-commit": {
        "description": "Generate AI commit message",
        "action": "node .claude/hooks/ai-commit-generator.js",
        "enforcement": "MANDATORY for code changes"
      },
      "-arch": {
        "description": "Run architecture analysis",
        "action": "node agents/analysis/architecture_analyzer.js",
        "enforcement": "MANDATORY for structural changes"
      },
      "-analyze": {
        "description": "Comprehensive system analysis",
        "action": "Run full system analysis with all SuperClaude features",
        "enforcement": "MANDATORY for system-wide reviews"
      }
    }
  },
  "development": {
    "server": {
      "port": 3001,
      "fallback_port": 3000,
      "auto_restart": true
    },
    "testing": {
      "run_before_commit": true,
      "test_commands": [
        "npm run lint",
        "npm run build", 
        "node test-all-success-functions.js",
        "node test-comprehensive-website.js"
      ]
    },
    "agents": {
      "auto_start": true,
      "cvperfect_agents": true,
      "debug_agents": true,
      "agent_launchers": [
        "node start-agents-system.js",
        "node start-debug-agents.js"
      ]
    }
  },
  "hooks": {
    "pre-response": {
      "command": "cmd /c .claude/hooks/pre-response-enhanced.bat && node .claude/hooks/superclaud-command-enforcer.js && node .claude/hooks/auto-feature-injector.js",
      "timeout": 15000,
      "background": false,
      "description": "Full SuperClaude auto-enforcement: detection + injection + mandatory compliance",
      "on": "pre-response"
    },
    "session-start": {
      "command": "node auto-session-init.js && node .claude/hooks/superclaud-enforcer.js && node start-agents-system.js",
      "timeout": 15000,
      "background": true,
      "description": "Auto-initialize CVPerfect features + SuperClaude enforcement system + Auto-start CVPerfect 40-agent system"
    },
    "task-execute": {
      "command": "node -e \"const {processTask} = require('./claude-cvperfect-integration'); processTask(process.argv[1]).then(r => console.log(JSON.stringify(r)));\"",
      "timeout": 30000,
      "description": "Process task through CVPerfect agents if applicable"
    },
    "pre-edit": {
      "command": "bash .claude/hooks/pre-edit.sh",
      "timeout": 120000,
      "background": false,
      "description": "Run regression prevention checks before file edits - backup critical files",
      "on": "file-edit",
      "files": ["pages/success.js", "pages/index.js"]
    },
    "post-edit": {
      "command": "bash .claude/hooks/post-edit.sh",
      "timeout": 180000,
      "background": false,
      "description": "Validate changes and detect regressions after file edits - run lint check on JS files",
      "on": "file-edit-complete"
    },
    "pre-commit": {
      "command": "bash .claude/hooks/regression-guard.sh && npm run lint && npm run build",
      "timeout": 300000,
      "background": false,
      "description": "Comprehensive regression analysis before git commits - full validation",
      "on": "git-commit"
    },
    "regression-guard": {
      "command": "node .claude/test-snapshots/snapshot-manager.js validate",
      "timeout": 240000,
      "background": false,
      "description": "Manual regression validation command"
    }
  },
  "commands": {
    "dev": {
      "command": "npm run dev",
      "description": "Start development server"
    },
    "test": {
      "command": "npm run lint && npm run build && node test-all-success-functions.js",
      "description": "Run comprehensive tests"
    },
    "agents": {
      "command": "node start-agents-system.js",
      "description": "Start CVPerfect agents system"
    },
    "debug": {
      "command": "node start-debug-agents.js", 
      "description": "Start debug agents system"
    },
    "verify": {
      "command": "node test-comprehensive-website.js && node test-agents-integration.js",
      "description": "Full system verification"
    }
  },
  "templates": {
    "api_endpoint": {
      "path": "pages/api/",
      "template": "api_template.js",
      "description": "Create new API endpoint with security and validation"
    },
    "test_file": {
      "path": "",
      "template": "test_template.js", 
      "description": "Create new test file with CVPerfect patterns"
    },
    "agent": {
      "path": "agents/",
      "template": "agent_template.js",
      "description": "Create new specialized agent"
    }
  },
  "security": {
    "api_protection": {
      "cors_enabled": true,
      "rate_limiting": true,
      "input_validation": true,
      "auth_middleware": true
    },
    "file_validation": {
      "max_size": "10MB",
      "allowed_types": ["pdf", "docx"],
      "virus_scan": false
    },
    "session_management": {
      "secure_sessions": true,
      "session_timeout": "24h",
      "cleanup_interval": "1h"
    }
  },
  "performance": {
    "timeout_management": {
      "api_timeouts": {
        "cv_parsing": 15000,
        "cv_analysis": 60000,
        "payment": 30000,
        "session": 5000
      }
    },
    "rate_limits": {
      "general_api": "100/15min",
      "cv_analysis": "5/1hour", 
      "file_upload": "10/15min",
      "payment": "5/30min"
    },
    "caching": {
      "session_cache": true,
      "api_cache": false,
      "static_cache": true
    }
  },
  "monitoring": {
    "error_logging": {
      "enabled": true,
      "log_directory": "logs/",
      "retention": "30d"
    },
    "performance_monitoring": {
      "enabled": true,
      "metrics": ["response_time", "error_rate", "throughput"],
      "alerts": {
        "error_rate_threshold": 5,
        "response_time_threshold": 5000
      }
    }
  },
  "integrations": {
    "supabase": {
      "enabled": true,
      "tables": ["cvperfect_sessions", "users", "payments"],
      "rls_enabled": true
    },
    "stripe": {
      "enabled": true,
      "webhook_validation": true,
      "plans": ["Basic", "Gold", "Premium"]
    },
    "groq": {
      "enabled": true,
      "model": "llama-3.1-70b-versatile",
      "max_tokens": 4000,
      "temperature": 0.3
    },
    "email": {
      "provider": "gmail",
      "templates": true,
      "rate_limit": "10/hour"
    }
  },
  "deployment": {
    "environment": "development",
    "build_command": "npm run build",
    "start_command": "npm run start",
    "health_check": "/api/health",
    "pre_deploy": [
      "npm run lint",
      "npm run build",
      "node test-comprehensive-website.js"
    ]
  }
}